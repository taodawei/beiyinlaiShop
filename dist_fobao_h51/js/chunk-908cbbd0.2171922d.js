(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-908cbbd0"],{"0e5e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page"},[t("div",{staticClass:"inner"},[t("div",{staticClass:"list"},[t("div",{staticClass:"tit"},[e._v("反馈类型")]),t("div",{staticClass:"group"},[t("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.list,(function(s,a){return t("van-checkbox",{key:a,attrs:{name:s,shape:"square","icon-size":"14px","checked-color":"#1696FF"}},[e._v(" "+e._s(s)+" ")])})),1)],1)]),t("div",{staticClass:"list"},[t("div",{staticClass:"tit"},[e._v("反馈与建议")]),t("div",{staticClass:"text"},[t("van-field",{attrs:{rows:"2",autosize:{minHeight:120},type:"textarea",maxlength:"100",placeholder:"请您写出对平台的反馈及意见！","show-word-limit":""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),t("div",{staticClass:"upimg"},[t("van-uploader",{attrs:{multiple:"","max-count":6,"after-read":e.afterRead},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)]),t("div",{staticClass:"fix-bott"},[t("div",{staticClass:"btn",on:{click:e.feebback_submit}},[e._v("提交意见反馈")])])])])},i=[],o=(s("4e3f"),s("4407")),l={name:"feedback",components:{},data(){return{result:[],fileList:[],list:[],message:"",imgs:[]}},computed:{},created(){this.setView()},methods:{setView(){this.$api("index_config",{}).then(e=>{console.log("反馈类型",e);let{code:t,data:s}=e;1==t&&(this.list=s.feed_type)})},afterRead(e,t){console.log("处理上传",e,t);let s=[e].flat(),a=[];s.forEach(e=>{let t=o["a"].index_upload({params:{file:e.file,if_touxiang:0}});a.push(t)}),Promise.all(a).then(e=>{console.log("所有文件上传完成",e);let t=e.filter(e=>1==e.code).map(e=>e.image);console.log(t),this.imgs=[...this.imgs,...t]}).catch(e=>{console.log("上传出错",e)})},feebback_submit(){if(0==this.result.length)alert("请选择反馈类型");else if(""==this.message)alert("请输入反馈意见");else{let e={feed_type:this.result.join(","),content:this.message,imgs:this.imgs.join(",")};this.$api("index_feedback",e).then(e=>{console.log("添加反馈",e);let{code:t,data:s}=e;1==t&&(alert("提交成功"),setTimeout(()=>{this.$router.back()},1e3))})}}}},n=l,c=(s("9939"),s("0b56")),r=Object(c["a"])(n,a,i,!1,null,"2fba739f",null);t["default"]=r.exports},4407:function(e,t,s){"use strict";s("82ae");var a=s("bbf7"),i=s("4360");const o=a["a"].api;let l={params:{},success:function(e){console.log("默认的回调",e)}};t["a"]={index_upload({params:e,success:t}=l){const s=new FormData;s.append("action","index_upload"),s.append("com_id",i["a"].state.com_id),s.append("user_id",localStorage.getItem("user_id")),s.append("token",localStorage.getItem("token")),s.append("img",e.file),s.append("if_touxiang",e.if_touxiang||"");const a={headers:{"Content-Type":"multipart/form-data;boundary="+(new Date).getTime()}};return o("index_upload",s,"post",a)}}},9939:function(e,t,s){"use strict";s("c195")},c195:function(e,t,s){}}]);