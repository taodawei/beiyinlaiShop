(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bff1e8a"],{"0b83":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container-publish"},[s("van-nav-bar",{attrs:{title:"售后申请","left-arrow":"",fixed:!0},on:{"click-left":t.onClickLeft}}),s("div",{staticClass:"tab-box"},[s("van-tabs",{model:{value:t.refund_status,callback:function(s){t.refund_status=s},expression:"refund_status"}},t._l(t.refund_status_list,(function(t,e){return s("van-tab",{key:e,attrs:{name:t.status,title:t.title}})})),1)],1),s("div",{staticClass:"content"},[-10==t.refund_status?[t.list_order.length?s("div",{staticClass:"list"},t._l(t.list_order,(function(e,i){return s("div",{key:e.id,staticClass:"item"},[e.products?s("div",{staticClass:"goods-info"},[s("div",{staticClass:"good-item"},[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:e.products.image,alt:""}})]),s("div",{staticClass:"detail-box"},[s("div",{staticClass:"top"},[t._v(t._s(e.products.title))]),s("div",{staticClass:"center"},[s("span",[t._v(t._s(e.products.key_vals))])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"price"},[t._v("￥ "+t._s(e.products.unit_price))]),s("span",{staticClass:"num"},[t._v("x "+t._s(e.products.num))])])])])]):t._e(),s("div",{staticClass:"other-info"},[s("div",{staticClass:"left"},[s("div",{staticClass:"created-time"},[t._v("下单时间："+t._s(e.dtTime))]),s("div",{staticClass:"created-time"},[t._v("订单号码："+t._s(e.order_no))])]),s("div",{staticClass:"right"},[-10==t.refund_status?s("van-button",{attrs:{size:"small",type:"warning"},on:{click:function(s){return t.refund_apply(e)}}},[t._v("申请售后")]):t._e(),0==t.refund_status?s("van-button",{attrs:{size:"small",type:"warning"},on:{click:function(s){return t.refund_cancel(e,i)}}},[t._v("取消售后")]):t._e()],1)])])})),0):t._e()]:[t.list_refund.length?s("div",{staticClass:"list"},t._l(t.list_refund,(function(e,i){return s("div",{key:e.id,staticClass:"item"},[e.products?s("div",{staticClass:"goods-info"},[s("div",{staticClass:"good-item",on:{click:function(s){return t.refund_detail(e)}}},[s("div",{staticClass:"img-box cover"},[s("img",{attrs:{src:e.products.image,alt:""}})]),s("div",{staticClass:"detail-box"},[s("div",{staticClass:"top"},[t._v(t._s(e.products.title))]),s("div",{staticClass:"center"},[s("span",[t._v(t._s(t._f("f_guige")(e.products.key_vals)))])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"price"},[t._v(t._s(e.is_jifen?"积分":"￥")+" "+t._s(e.is_jifen?e.products.jifen:e.products.price_sale))]),s("span",{staticClass:"num"},[t._v("x "+t._s(e.products.num))])])])])]):t._e(),s("div",{staticClass:"other-info"},[s("div",{staticClass:"left"},[s("div",{staticClass:"created-time"},[t._v("订单号码："+t._s(e.sn))]),s("div",{staticClass:"created-time"},[t._v("申请时间："+t._s(e.dtTime))]),s("div",{staticClass:"created-time"},[t._v("服务单状态："+t._s(e.status_info))])]),s("div",{staticClass:"right"},[-10!=t.refund_status?s("van-button",{attrs:{size:"small",type:"warning"},on:{click:function(s){return t.refund_detail(e)}}},[t._v("详情")]):t._e()],1)])])})),0):t._e()]],2)],1)},a=[],r=(e("4e3f"),e("36fc")),n=e("7736"),d={name:"my-refund",components:{},data(){return{refund_status:-10,refund_status_list:[{status:-10,title:"售后"},{status:0,title:"待处理"},{status:1,title:"已完成"},{status:2,title:"申请记录"}],list_order:[],list_refund:[],pagination:{page:1,pagenum:1e3},count:0,keyword:""}},watch:{refund_status(t){"-10"==t?this.query_shouhou_order():this.query_apply()}},computed:{...Object(n["b"])(["origin"])},filters:{format_currency(t){let s="￥";return 8==t&&(s="积分"),s}},created(){this.setView()},methods:{setView(){this.query_shouhou_order(),this.query_apply()},query_shouhou_order(){this.$api("refund_afterSaleList",{...this.pagination}).then(t=>{console.log("退换货列表",t);let{code:s,data:e}=t;if(1==s){let{list:t}=e;this.list_order=t||[]}})},query_apply(){this.$api("refund_lists",{...this.pagination,status:this.refund_status}).then(t=>{console.log("退换货列表",t);let{code:s,data:e}=t;if(1==s){let{list:t}=e;t.forEach(t=>{t.is_jifen=t.products.jifen?1:0}),this.list_refund=t}})},onApplyRefund(t){this.$router.push({path:"/orderRefund",query:{id:t.id}})},onRefundServiceDel(t){r["a"].confirm({title:"信息提示？",message:"确认删除售后服务单?"}).then(()=>{alert("撤销"),this.$store.dispatch("refund_del",{tuihuan_id:t.id}).then(s=>{let{code:e,msg:i}=s.data;if(alert(i),1==e){let s=this.list_refund.findIndex(s=>s.id==t.id);this.list_refund.splice(s,1)}})}).catch(()=>{alert("操作已取消")})},onRefundServiceDetail(t){this.$router.push({path:"/refundDetail",query:{id:t.id}})},refund_detail(t){this.$router.push({path:"/refundProgress",query:{refund_id:t.id}})},onClickLeft(){this.$router.push({path:"/userCenter"})},refund_apply(t){console.log({...t}),this.$router.push(`/refundType?order_id=${t.order_id}&inventoryId=${t.inventoryId}`)},refund_cancel(t,s){r["a"].confirm({title:"信息提示？",message:"确认取消售后服务申请?"}).then(()=>{this.$api("refund_qxRefund",{id:t.id}).then(t=>{let{code:s,message:e}=t;alert(e),1==s&&this.setView()})}).catch(()=>{alert("操作已取消")})}}},u=d,l=(e("d58c"),e("0b56")),c=Object(l["a"])(u,i,a,!1,null,"73d53664",null);s["default"]=c.exports},5671:function(t,s,e){},d58c:function(t,s,e){"use strict";e("5671")}}]);