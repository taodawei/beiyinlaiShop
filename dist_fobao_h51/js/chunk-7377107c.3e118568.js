(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7377107c"],{"3a2c":function(t,e,a){},4407:function(t,e,a){"use strict";a("82ae");var i=a("bbf7"),s=a("4360");const o=i["a"].api;let n={params:{},success:function(t){console.log("默认的回调",t)}};e["a"]={index_upload({params:t,success:e}=n){const a=new FormData;a.append("action","index_upload"),a.append("com_id",s["a"].state.com_id),a.append("user_id",localStorage.getItem("user_id")),a.append("token",localStorage.getItem("token")),a.append("img",t.file),a.append("if_touxiang",t.if_touxiang||"");const i={headers:{"Content-Type":"multipart/form-data;boundary="+(new Date).getTime()}};return o("index_upload",a,"post",i)}}},8211:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page"},[e("div",{staticClass:"inner"},[e("div",{staticClass:"content"},[0!=t.baseInfo.renzheng?e("div",{staticClass:"state-box"},[t._v(" 认证状态："),e("span",[t._v(t._s(t.stateText))])]):t._e(),e("div",{staticClass:"form-wrap"},[e("van-form",[e("van-field",{attrs:{label:"真实姓名",colon:"",placeholder:"请填写您的真实姓名"},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-icon",{staticStyle:{visibility:"hidden"},attrs:{name:"arrow"}})]},proxy:!0}]),model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),e("van-field",{attrs:{colon:"",readonly:"",label:"性别",placeholder:"请选择您的性别"},on:{click:function(e){t.showActionSex=!0}},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-icon",{attrs:{name:"arrow"}})]},proxy:!0}]),model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}}),e("van-field",{attrs:{label:"身份证号",colon:"",placeholder:"请填写您的身份证号"},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-icon",{staticStyle:{visibility:"hidden"},attrs:{name:"arrow"}})]},proxy:!0}]),model:{value:t.identity_id,callback:function(e){t.identity_id=e},expression:"identity_id"}})],1)],1),e("div",{staticClass:"bottom-box"},[e("div",{staticClass:"title"},[t._v("身份证")]),e("div",{staticClass:"upload-list"},[e("div",{staticClass:"upload-box"},[e("uploadIdCard",{attrs:{imgUrl:t.identity_card_front,type:"身份证正面"},on:{changeImage:t.changeImage}})],1),e("div",{staticClass:"upload-box"},[e("uploadIdCard",{attrs:{imgUrl:t.identity_card_back,type:"身份证反面"},on:{changeImage:t.changeImage}})],1)])])])]),"待审核"!=t.stateText&&"审核通过"!=t.stateText?e("div",{staticClass:"footer"},[e("button",{on:{click:t.onSubmit}},[t._v("认证")])]):t._e(),e("van-action-sheet",{attrs:{actions:t.opts_sex,"cancel-text":"取消",round:!1,"close-on-click-action":""},on:{cancel:function(e){t.showActionSex=!1},select:t.onSelect_sex},model:{value:t.showActionSex,callback:function(e){t.showActionSex=e},expression:"showActionSex"}})],1)},s=[],o=(a("4e3f"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload-item"},[e("van-uploader",{attrs:{"after-read":t.afterRead,"before-delete":t.upload_delete,accept:"image/*","max-count":"1"},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},[t.imgUrl?[e("img",{class:"头像"==t.type?"circle":"base",attrs:{src:t.uploadDefaultImg}})]:t._e(),t.imgUrl?t._e():[e("img",{class:"头像"==t.type?"circle":"base",attrs:{src:t.uploadDefaultImg}}),e("div",{staticClass:"text"},[t._v(t._s(t.type))])]],2)],1)}),n=[],l=(a("4407"),a("7736")),c={name:"upload-card",props:["type","imgUrl"],data(){return{list_upload:[],fileList:[],img_upload:"",uploadDefaultImg:a("e75a")}},watch:{list_upload(t,e){console.log("监视 list_upload",[...t]),this.img_upload=t.join(),this.update_view()},imgUrl(t,e){t?(this.list_upload=[t],this.fileList=[{url:t}]):(this.list_upload=[],this.fileList=[])},fileList(t){console.log("监视 fileList",t)}},computed:{...Object(l["b"])(["baseInfo"])},created(){},methods:{update_view(){this.$emit("changeImage",{type:this.type,url:this.img_upload})},afterRead(t,e){console.log("处理上传 file",t),console.log("处理上传 detail",e);let a=[t].flat(),i=[];a.forEach(t=>{let e=this.mix_fileUpload({file:t.file,if_touxiang:0});i.push(e)}),Promise.all(i).then(t=>{console.log("所有文件上传完成",t);let e=t.filter(t=>1==t.code).map(t=>t.image);this.list_upload=[...this.list_upload,...e]}).catch(t=>{console.log("上传出错",t)})},upload_delete(t,e){e.index;this.$emit("changeImage",{type:this.type,url:""})}}},d=c,r=(a("cd39"),a("0b56")),u=Object(r["a"])(d,o,n,!1,null,"5676bbf3",null),p=u.exports,m=a("f2a7"),f={name:"user-real-name",components:{uploadIdCard:p},data(){return{showBirth:!1,showActionSex:!1,opts_sex:[{name:"男"},{name:"女"}],name:"",sex:"",identity_id:"",identity_card_front:"",identity_card_back:""}},computed:{...Object(l["b"])(["defaultAvatar","baseInfo","webConfig","qrcode_kefu","bannerMap"]),stateText(){let t="",e={0:"未提交",1:"待审核",2:"审核通过","-1":"审核失败"};return t=e[this.baseInfo.renzheng],t}},watch:{baseInfo(t,e){t&&(this.name=t.name,this.sex="2"==t.sex?"女":"男",this.identity_id=t.identity_id,this.identity_card_front=t.identity_card_front,this.identity_card_back=t.identity_card_back)}},created(){this.setView()},methods:{setView(){this.$store.dispatch("users_userInfo")},changeImage(t){console.log("父组件 changeImgae",t);let{type:e,url:a}=t;"身份证正面"==e?this.identity_card_front=a:"身份证反面"==e&&(this.identity_card_back=a)},onSelect_sex(t,e){console.log({...t},e),this.sex=t.name},onSubmit(t){console.log("保存用户信息",t);this.name?this.sex?this.identity_id?this.identity_card_front?this.identity_card_back?this.$api("users_editInfo",{name:this.name,sex:"男"==this.sex?1:2,identity_id:this.identity_id,identity_card_front:this.identity_card_front,identity_card_back:this.identity_card_back}).then(t=>{let{code:e,message:a,data:i}=t;alert(a),1==e&&this.toBack()}):alert("请上传身份证反面照"):alert("请上传身份证正面照"):alert("请输入身份证号"):alert("请选择性别"):alert("请输入姓名")},showLoading(){m["a"].loading({message:"图像上传中，请稍后...",forbidClick:!0})},hideLoading(){m["a"].clear()},onClickLeft(){this.$router.back()},logout(){this.$store.commit("clearLoginInfo"),this.$router.push("/")}}},h=f,g=(a("84b1"),Object(r["a"])(h,i,s,!1,null,"700f3774",null));e["default"]=g.exports},"84b1":function(t,e,a){"use strict";a("f8fb")},cd39:function(t,e,a){"use strict";a("3a2c")},e75a:function(t,e){t.exports="data:image/png;base64,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"},f8fb:function(t,e,a){}}]);