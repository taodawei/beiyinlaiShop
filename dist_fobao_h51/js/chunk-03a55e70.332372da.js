(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03a55e70"],{"22f2":function(t,e,s){},"4ffd":function(t,e,s){t.exports=s.p+"img/logo.5731ab3a.png"},af1d:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page"},[e("div",{staticClass:"ctx"},[e("div",{ref:"saveImgBox",staticClass:"save-img-box"}),e("div",{ref:"capture",staticClass:"inner"},[e("div",{staticClass:"img-box"},[e("img",{attrs:{src:t.curr.share_img,crossorigin:"anonymous"}})]),e("div",{staticClass:"info-box"},[e("div",{staticClass:"text"},[t._v(t._s(t.curr.title))]),e("div",{staticClass:"price"},[e("div",{staticClass:"sale"},[e("span",{staticClass:"currency"},[t._v("￥")]),e("span",[t._v(t._s("group"==t.mode?t.curr.price_tuan:t.curr.price_sale2))])]),e("div",{staticClass:"market"},[e("span",{staticClass:"currency"},[t._v("￥")]),t._v(" "+t._s(t.curr.price_market)+" ")])])]),e("div",{staticClass:"bottom-box"},[t._m(0),e("div",{staticClass:"right"},[e("div",{staticClass:"vue-qr-wrap"},[e("vue-qr",{attrs:{text:t.qrcodeText,size:400,callback:t.qrcodeCallback}})],1)])])]),t._m(1)])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"left"},[e("img",{attrs:{src:s("4ffd"),alt:""}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-box"},[e("span",[t._v("长按保存图片")])])}],r=(s("4e3f"),s("0057")),o=s.n(r),c=s("0ef5"),n=s.n(c),l=s("7736"),u={name:"goods-share",components:{VueQr:n.a},data(){let t=localStorage.getItem("user_id")||"",e="goodsDetail";return"group"==this.$route.query.mode&&(e="goodsDetailGroup"),{mode:this.$route.query.mode||"",curr:{},qrcodeText:window.location.origin+`/${e}?id=${this.$route.query.id}&fromId=${t}&from=fenxiang`}},computed:{},computed:{...Object(l["b"])([""])},created(){console.log(" ========== 分享海报链接 ========== ",this.qrcodeText),this.setView()},mounted(){},methods:{setView(){this.$api("product_detail",{inventoryId:this.$route.query.id}).then(t=>{console.log("商品详情",t);let{code:e,data:s}=t;1==e&&(s.share_img=s.images[0]+"?ms="+(new Date).getTime(),this.curr=s)})},qrcodeCallback(t,e){this.timer=setTimeout(()=>{this.saveAsImg()},1500)},saveAsImg(){console.log("开始生成海报 1"),new o.a(this.$refs.capture,{scale:3,useCORS:!0,allowTaint:!0,taintTest:!0}).then(t=>{console.log("开始生成海报 2");let e=new Image;e.src=t.toDataURL(),this.$refs.saveImgBox.appendChild(e),alert("分享海报生成成功"),console.log("开始生成海报 4")}),console.log("开始生成海报 3")},onClickLeft(){this.$route.query&&this.$route.query.wxshare?this.$router.push("/"):this.$router.back()}}},d=u,m=(s("eae3"),s("0b56")),g=Object(m["a"])(d,a,i,!1,null,"470c1847",null);e["default"]=g.exports},eae3:function(t,e,s){"use strict";s("22f2")}}]);