(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2866040c"],{"3dba":function(t,s,i){"use strict";i("8a8d")},8908:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("div",{staticClass:"bg-box"},[s("van-nav-bar",{attrs:{title:"售后服务单详情","left-arrow":"","right-text":1==t.status?"修改":"",fixed:!0},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),-2!=t.status?s("div",{staticClass:"step-box"},[s("div",{staticClass:"refund-state"},[t._v(t._s(t.refundStateText))]),s("van-steps",{attrs:{active:t.activeStep}},t._l(t.stepArr,(function(i,e){return s("van-step",{key:e},[t._v(t._s(i))])})),1),"驳回"==t.refundStateText?[s("div",{staticClass:"bohui"},[t._v(t._s(t.curr.processing_record))])]:t._e()],2):s("div",{staticClass:"step-box"},[s("div",{staticClass:"refund-state"},[t._v(t._s(t.refundStateText))]),s("div",{staticClass:"bohui",staticStyle:{"margin-top":"30px"}},[t._v("如有需要，可在售后申请页面重新提交服务单")])])],1),s("div",{staticClass:"content-box"},[s("div",{staticClass:"content"},[s("div",{staticClass:"info"},[s("refundGoodsInfo",{attrs:{curr:t.refundObj,currency:t.currency}})],1),[s("div",{directives:[{name:"show",rawName:"v-show",value:(1==t.type||2==t.type)&&t.status>1,expression:"(type == 1 || type == 2) && status > 1"}],staticClass:"section"},[s("div",{staticClass:"shouhou-info"},[s("div",{staticClass:"main-title"},[t._v("商家收货信息")]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("收货人")]),s("div",{staticClass:"text"},[t._v(t._s(t.shangjiaInfo.name))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("电话")]),s("div",{staticClass:"text"},[t._v(t._s(t.shangjiaInfo.phone))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("地址")]),s("div",{staticClass:"text"},[t._v(t._s(t.shangjiaInfo.address))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("备注")]),s("div",{staticClass:"text"},[t._v(t._s(t.shangjiaInfo.beizhu))])])]),2==t.type&&t.curr.fahuo_company?[s("div",{staticClass:"shouhou-info"},[s("div",{staticClass:"main-title"},[t._v("商家重新发货信息")]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("物流公司")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.fahuo_company))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("快递单号")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.fahuo_no))])])])]:t._e(),t.canShowSubmitBtnReceived?s("div",{staticClass:"btn-box btn-submit"},[s("van-button",{attrs:{block:"",round:"",type:"warning"},on:{click:t.onSubmitReceived}},[t._v("确认收货")])],1):t._e(),s("div",{staticClass:"shouhou-info shouhou-info-edit"},[s("div",{staticClass:"main-title"},[t._v("提交退货信息")]),s("van-field",{staticClass:"address-field",attrs:{disabled:t.wuliu_disabled,name:"wuliu_company",label:"物流公司",placeholder:"请输入物流公司",type:"text"},model:{value:t.wuliu_company,callback:function(s){t.wuliu_company=s},expression:"wuliu_company"}}),s("van-field",{staticClass:"address-field",attrs:{disabled:t.wuliu_disabled,name:"wuliu_code",label:"快递单号",placeholder:"请输入快递单号",type:"text"},model:{value:t.wuliu_code,callback:function(s){t.wuliu_code=s},expression:"wuliu_code"}})],1)],2)],3==t.type&&t.curr.fahuo_company?[s("div",{staticClass:"shouhou-info"},[s("div",{staticClass:"main-title"},[t._v("商家重新发货信息")]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("物流公司")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.fahuo_company))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("快递单号")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.fahuo_no))])])]),t.canShowSubmitBtnReceived?s("div",{staticClass:"btn-box btn-submit"},[s("van-button",{attrs:{block:"",round:"",type:"warning"},on:{click:t.onSubmitReceived}},[t._v("确认收货")])],1):t._e()]:t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.canShowSubmitBtnWuLiu,expression:"canShowSubmitBtnWuLiu"}],staticClass:"btn-box btn-submit"},[s("van-button",{attrs:{block:"",round:"",type:"warning"},on:{click:t.onSubmitTuihuo}},[t._v("提交退货信息")])],1),s("div",{staticClass:"refund-info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("售后类型")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.typeText))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("申请原因")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.reason))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("问题描述")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.remark))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("图片信息")]),s("div",{staticClass:"text"},[t.upload_img_arr.length?s("div",{staticClass:"img-list"},t._l(t.upload_img_arr,(function(i,e){return s("div",{key:e,staticClass:"img-item",on:{click:function(s){return t.onPreviewImg(i,e)}}},[s("img",{attrs:{src:i,alt:""}})])})),0):s("div",[t._v("无")])])]),4==t.type?s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("申请金额")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.filling_money_price))])]):t._e(),4==t.type?s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("退回金额")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.refund_amount))])]):t._e(),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("申请时间")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.dtTime))])])]),2==t.type?[s("div",{staticClass:"shouhuo-info"},[s("div",{staticClass:"main-title"},[t._v("买家收货信息")]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("收件人")]),s("div",{staticClass:"text"},[t._v(t._s(t.addressinfo.name))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("电话")]),s("div",{staticClass:"text"},[t._v(t._s(t.addressinfo.phone))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("地址")]),s("div",{staticClass:"text"},[t._v(t._s(t.addressinfo.areaName)+" "+t._s(t.addressinfo.address))])])])]:t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:-1==t.status,expression:"status == -1"}],staticClass:"bohui-info"},[s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("驳回原因")]),s("div",{staticClass:"text"},[t._v(t._s(t.curr.processing_record))])])]),s("div",{staticClass:"operate-box"},[s("div",{staticClass:"btn-box"},[s("van-button",{attrs:{disabled:!t.enabled_serviceCancel,block:"",round:"",plain:"",type:"warning"},on:{click:t.onClickRefundCancel}},[t._v("撤销服务单")])],1),s("div",{staticClass:"btn-box"},[s("van-button",{attrs:{disabled:!t.enabled_serviceDelete,block:"",round:"",type:"warning"},on:{click:t.onClickRefundDel}},[t._v("删除服务单")])],1)])],2)])])},a=[],c=(i("4e3f"),i("36fc")),l=i("f2a7"),n=i("3dc0"),d=function(){var t=this,s=t._self._c;return s("div",{staticClass:"good-info"},[s("div",{staticClass:"title"},[t._v("商品清单")]),s("div",{staticClass:"list"},[s("div",{staticClass:"item"},[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:t.curr.image,alt:""}})]),t.curr.pdtInfo?s("div",{staticClass:"info"},[s("div",{staticClass:"top"},[t._v(t._s(t.curr.pdtInfo.title))]),s("div",{staticClass:"center"},[t._v(t._s(t.curr.pdtInfo.key_vals))]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"price"},[t._v(" "+t._s("￥")+" "+t._s(t.curr.unit_price)+" "),s("span",{staticClass:"num"},[t._v("x "+t._s(t.curr.num))])])])]):t._e()])]),s("div",{staticClass:"total-price"},[s("span",[t._v("合计：")]),t._v(" "+t._s(t.currency)+" "+t._s(t.curr.jifen_payed||t.curr.price)+" ")])])},u=[],o={name:"List",props:["curr","currency"],data(){return{}},created(){},methods:{}},r=o,v=(i("3dba"),i("0b56")),_=Object(v["a"])(r,d,u,!1,null,"82c65464",null),h=_.exports,m={name:"User",components:{refundGoodsInfo:h},data(){return{type:"",status:"",refundStateText:"通过",stepArr:[],activeStep:"",curr:{},refundObj:{},upload_img_arr:[],currency:"￥",wuliu_company:"",wuliu_code:"",wuliu_disabled:!1,shangjiaInfo:{},addressinfo:{},huanhuo_wuliu_info:{},canShowSubmitBtnWuLiu:!1,canShowSubmitBtnReceived:!1,filling_money_price:"",enabled_serviceCancel:!1,enabled_serviceDelete:!1}},computed:{},created(){this.setView()},methods:{setStep(t,s){console.log("售后类型",t),console.log("售后状态",s);let i=[],e="",a="";1==t?(i=["申请","审核","买家退货","待退款","完成"],1==s?(e="0",a="待审核"):2==s?this.wuliu_code?(e="2",a="待卖家确认"):(e="1",a="待买家退货"):3==s?(e="3",a="待退款"):4==s&&(e="4",a="完成")):2==t?(i=["申请","审核","买家退货","重新发货","待收货","完成"],1==s?(e="0",a="待审核"):2==s?this.wuliu_code?(e="2",a="待卖家确认"):(e="1",a="待买家退货"):5==s?(e="3",a="待发货"):6==s?(e="4",a="待收货"):4==s&&(e="5",a="已完成")):3==t?(i=["申请","审核","商家发货","完成"],1==s?(e="0",a="待审核"):7==s?(e="1",a="待发货"):6==s?(e="2",a="待收货"):4==s&&(e="3",a="已完成")):4==t&&(i=["提交申请","审核","完成"],1==s?(e="0",a="待退款"):4==s&&(e="2",a="完成")),-1==s&&(a="驳回",e="1"),-2==s&&(a="服务已取消"),this.stepArr=i,this.activeStep=e,this.type=t,this.status=s,this.refundStateText=a,1!=t&&2!=t||2!=s||this.curr.user_logistics_info||(this.canShowSubmitBtnWuLiu=!0),2==t&&6==s&&(this.canShowSubmitBtnReceived=!0),3==t&&6==s&&(this.canShowSubmitBtnReceived=!0),1==s&&(this.enabled_serviceCancel=!0),-2!=s&&-1!=s&&4!=s||(this.enabled_serviceDelete=!0)},setView(){this.query_serviceDetail()},query_serviceDetail(){this.$api("refund_tuihuanDetail",{tuihuan_id:this.$route.query.id}).then(t=>{console.log("退换货服务单详情",t);let{code:s,data:i,message:e}=t;if(1==s){let{type:t,status:s,uploadimgs:e,merchantinfo:a,user_logistics_info:c,addressinfo:l,fahuo_company:n,fahuo_no:d}=i;if(t){let s={1:"退货",2:"换货",3:"补发",4:"补款"};i.typeText=s[t]}if(e&&(this.upload_img_arr=e.split(",")),a&&(a=JSON.parse(a),this.shangjiaInfo={name:a["商家姓名"],phone:a["收货电话"],address:a["商家地址"],beizhu:a["备注"]}),c){let t=JSON.parse(c);this.wuliu_company=t["物流公司"],this.wuliu_code=t["物流单号"],this.wuliu_disabled=!0}else this.wuliu_disabled=!1;2!=t&&3!=t||(this.addressinfo=l,n&&(this.huanhuo_wuliu_info={fahuo_company:n,fahuo_no:d})),this.curr=i,this.queryRefundDetail(i.detailId),this.setStep(t,s)}})},queryRefundDetail(t){this.$api("refund_detail",{detail_id:t}).then(t=>{console.log("退换货详情",t);let{code:s,detailinfo:i,message:e}=t;1==s&&(i.pdtInfo=JSON.parse(i.pdtInfo),this.refundObj=i)})},onClickRefundCancel(){c["a"].confirm({title:"信息提示？",message:"确认撤销售后申请服务单?"}).then(()=>{alert("撤销"),this.$store.dispatch("refund_withdraw",{tuihuan_id:this.$route.query.id}).then(t=>{let{code:s,msg:i}=t.data;alert(i),1==s&&this.$router.push({path:"/myRefund"})})}).catch(()=>{alert("操作已取消")})},onClickRefundDel(){c["a"].confirm({title:"信息提示？",message:"确认删除售后申请服务单?"}).then(()=>{alert("撤销"),this.$store.dispatch("refund_del",{tuihuan_id:this.$route.query.id}).then(t=>{let{code:s,msg:i}=t.data;alert(i),1==s&&this.$router.push({path:"/myRefund"})})}).catch(()=>{alert("操作已取消")})},onSubmitReceived(){alert("确认收货?"),c["a"].confirm({title:"信息提示？",message:"是否确认收货?"}).then(()=>{alert("撤销"),this.$store.dispatch("refund_confirmRecept",{tuihuan_id:this.$route.query.id}).then(t=>{let{code:s,msg:i}=t.data;alert(i),1==s&&(this.canShowSubmitBtnReceived=!1,this.setView())})}).catch(()=>{alert("操作已取消")})},onSubmitTuihuo(){let{wuliu_company:t,wuliu_code:s}=this;t?s?this.$api("refund_addWuliuInfo",{tuihuan_id:this.$route.query.id,logistics_company:t,waybill_number:s}).then(t=>{console.log("退货信息提交",t);let{code:s,msg:i}=t;alert(i),1==s&&(this.canShowSubmitBtnWuLiu=!1,this.setView())}):alert("请填写物流单号"):alert("请填写物流公司")},showLoading(){l["a"].loading({message:"提交信息中，请稍后...",forbidClick:!0,duration:0})},hideLoading(){l["a"].clear()},onClickLeft(){this.$router.back()},onClickRight(){if(1!=this.status)return;let t={1:"退货",2:"换货",3:"补发",4:"补款"},s=t[this.type];this.$router.push({path:"/refundContent",query:{id:this.curr.detailId,type:s,mode:"edit",tuihuan_id:this.$route.query.id}})},onPreviewImg(t,s){Object(n["a"])({images:this.upload_img_arr,startPosition:s,closeable:!0})}}},C=m,f=(i("abb6"),Object(v["a"])(C,e,a,!1,null,"0144086d",null));s["default"]=f.exports},"8a8d":function(t,s,i){},"94d4":function(t,s,i){},abb6:function(t,s,i){"use strict";i("94d4")}}]);