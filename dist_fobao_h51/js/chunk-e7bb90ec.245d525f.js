(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e7bb90ec"],{3229:function(t,e,a){},"40f7":function(t,e,a){"use strict";a("3229")},4407:function(t,e,a){"use strict";a("82ae");var i=a("bbf7"),s=a("4360");const n=i["a"].api;let o={params:{},success:function(t){console.log("默认的回调",t)}};e["a"]={index_upload({params:t,success:e}=o){const a=new FormData;a.append("action","index_upload"),a.append("com_id",s["a"].state.com_id),a.append("user_id",localStorage.getItem("user_id")),a.append("token",localStorage.getItem("token")),a.append("img",t.file),a.append("if_touxiang",t.if_touxiang||"");const i={headers:{"Content-Type":"multipart/form-data;boundary="+(new Date).getTime()}};return n("index_upload",a,"post",i)}}},6844:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page"},[e("div",{staticClass:"inner"},[e("div",{staticClass:"tx"},[e("div",{staticClass:"user-avatar"},[e("img",{attrs:{src:t.baseInfo.user_image,alt:""}})])]),e("div",{staticClass:"info"},[e("div",{staticClass:"item"},[e("div",{staticClass:"left"},[t._v("昵称：")]),e("div",{staticClass:"rig"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],attrs:{type:"text",name:"",id:"",placeholder:"请填写您的昵称"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})])]),e("div",{staticClass:"item"},[e("div",{staticClass:"left"},[t._v("手机号：")]),e("div",{staticClass:"rig"},[t._v(t._s(t.baseInfo.username))])])]),e("div",{staticClass:"foot_bott"},[e("div",{staticClass:"btn",on:{click:function(e){return t.getList()}}},[t._v("提交")])])])])},s=[],n=(a("4e3f"),a("7736")),o=a("4407"),c={name:"mainInfo",components:{},data(){return{imgs:[],fileList:[],nickname:""}},computed:{...Object(n["b"])(["baseInfo"])},watch:{baseInfo(t,e){this.nickname=t.name,this.fileList=[{url:t.user_image}],console.log("fileList",this.fileList)}},created(){this.setView()},methods:{setView(){this.$store.dispatch("getUserInfo")},getList(){this.$api("users_editInfo",{nickname:""==this.nickname?this.baseInfo.name:this.nickname,image:this.imgs.join(",")}).then(t=>{console.log("修改用户信息",t);let{code:e,data:a}=t})},onWeChatLogin(){},afterRead(t,e){console.log("处理上传",t,e);let a=[t].flat(),i=[];a.forEach(t=>{let e=o["a"].index_upload({params:{file:t.file,if_touxiang:1}});i.push(e)}),Promise.all(i).then(t=>{console.log("所有文件上传完成",t);let e=t.filter(t=>1==t.code).map(t=>t.image);console.log(e),this.imgs=[...this.imgs,...e]}).catch(t=>{console.log("上传出错",t)})}}},l=c,r=(a("40f7"),a("0b56")),d=Object(r["a"])(l,i,s,!1,null,"1c3fb8cb",null);e["default"]=d.exports}}]);