(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b0612fa"],{"08cd":function(t,e,s){"use strict";s("4300")},"12a0":function(t,e,s){"use strict";s("58e3")},4041:function(t,e){t.exports="data:image/png;base64,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"},4300:function(t,e,s){},"58e3":function(t,e,s){},"98a4":function(t,e,s){"use strict";var i=s("1e34"),a=TypeError;t.exports=function(t,e){if(!delete t[e])throw a("Cannot delete property "+i(e)+" of "+i(t))}},a17e:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page"},[e("div",{staticClass:"inner"},[e("div",{staticClass:"good-box"},[e("div",{staticClass:"good-nav"},[e("van-sidebar",{on:{change:t.onChangeChannel},model:{value:t.activeNavIndex,callback:function(e){t.activeNavIndex=e},expression:"activeNavIndex"}},t._l(t.list_channel,(function(t,s){return e("van-sidebar-item",{key:s,attrs:{title:t.title}})})),1)],1),t.params.channel_id?e("div",{staticClass:"right-good-list"},[e("categoryGoodsListInfinity",{attrs:{params:t.params}})],1):t._e()])])])},a=[],o=(s("bcef"),s("7736")),n=(s("4e3f"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods-wrap"},[t.list.length?e("div",{staticClass:"goods-list"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了~"},on:{load:t.queryGoodsList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[e("div",{staticClass:"list list-goods"},t._l(t.list,(function(i,a){return e("div",{key:a,staticClass:"item",on:{click:function(e){return t.$router.push("/goodsDetail?id="+i.inventoryId)}}},[e("div",{staticClass:"img-box"},[e("img",{staticClass:"full product-img",attrs:{src:i.img}})]),e("div",{staticClass:"info-box"},[e("div",{staticClass:"title"},[t._v(t._s(i.title))]),e("div",{staticClass:"remark"},[t._v(" "+t._s(i.remark)+" ")]),e("div",{staticClass:"price-box"},[e("div",{staticClass:"left"},[e("span",{staticClass:"currency"},[t._v("￥")]),t._v(" "+t._s(i.price_sale)+" ")]),e("div",{staticClass:"right"},[e("img",{attrs:{src:s("4041"),alt:""}})])])])])})),0)])],1):e("div",{staticClass:"empty-container"},[[t.finished?e("van-empty",{staticClass:"custom-image",attrs:{description:"没有查询到商品信息"}}):t._e()]],2)])}),c=[],r=s("dd04"),l=s("f06f"),h=s("36fc"),u=s("f2a7"),d={name:"List",props:["params"],components:{shouqing:r["a"]},data(){return{list_shopcart:[],list:[],finished:!1,loading:!1,timer:null,pagination:{page:1,pagenum:10}}},computed:{...Object(o["b"])(["isLogin"]),list_shopcart_id(){return this.list_shopcart.map(t=>t.inventoryId)}},watch:{params(t,e){t.channel_id!=e.channel_id&&this.setView()}},created(){this.query_shopcart(),this.setView()},mounted(){},methods:{setView(){this.init(),this.queryGoodsList()},init(){this.pagination.page=1,this.finished=!1,this.list=[]},queryGoodsList(){"classify"!=this.$route.name||this.params.channel_id?this.$api("product_plist",{...this.params,...this.pagination}).then(t=>{let{code:e,data:s,pages:i,message:a}=t;1==e&&(i<=this.pagination.page?this.finished=!0:this.finished=!1,s.forEach(t=>{t.num=0}),this.list=[...this.list,...s],this.setListShopcartNum()),this.pagination.page++,this.loading=!1}):console.log(" ======= 分类页面没有传递分类参数 禁止本次查询 =======")},onInput_shopcart_goodsNum(t,e){console.log("item,",t),console.log("e,",e);let s=+t.num;console.log("num",s),s?s<=0?(alert("请输入正确的购买数量"),t.num=1):this.shopcart_updateNum(t):(alert("请输入正确的购买数量"),t.num=1)},query_shopcart(){this.isLogin&&this.$api("gouwuche_lists").then(t=>{console.log("购物车列表",t),1==t.code&&(this.list_shopcart=t.data,this.setListShopcartNum())})},setListShopcartNum(){this.list_shopcart.length&&this.list.forEach(t=>{let e=this.list_shopcart.map(t=>t.inventoryId);if(e.includes(t.inventoryId)){let e=this.list_shopcart.find(e=>e.inventoryId==t.inventoryId);t.num=e.num}})},click_operate(){return!1},delete_shopcart_goods(t){h["a"].confirm({title:"信息提示",message:"确定从购物车中删除当前商品？"}).then(()=>{this.shopcart_delete(t.inventoryId)}).catch(()=>{alert("已取消")})},shopcart_delete(t){l["a"].delete({params:{inventoryId:t},success:()=>{this.query_shopcart()}})},shopcart_goodMinus(t){1!=t.num?(t.num=--t.num,this.shopcart_updateNum(t)):this.delete_shopcart_goods(t)},shopcart_goodAdd(t){t.num=++t.num,this.shopcart_updateNum(t)},shopcart_updateNum(t){let{inventoryId:e,num:s}=t;l["a"].updateNum({params:{inventoryId:e,num:s},success:()=>{t.num=s}})},shopcart_add_goods(t){l["a"].add({params:{inventoryId:t,num:1},success:t=>{this.query_shopcart()}})},showLoading(){u["a"].loading({message:"数据加载中...",forbidClick:!0})},hideLoading(){u["a"].clear()},clear_timer(){clearTimeout(this.timer),this.timer=null}}},p=d,m=(s("b03b"),s("0b56")),g=Object(m["a"])(p,n,c,!1,null,"fa56c272",null),f=g.exports,v={name:"category",components:{categoryGoodsListInfinity:f},data(){return{useCache:!1,select_level_1:{},select_level_2:{},id:this.$route.query.id||"",keyword:"",activeNavIndex:0,params:{channel_id:this.id||""},list_channel:[]}},computed:{...Object(o["b"])(["pageScrollTopMap"]),scrollTop(){return this.pageScrollTopMap["category"]}},watch:{},beforeRouteEnter(t,e,s){s(t=>{"goodsDetail"==e.name?t.useCache=!0:t.useCache=!1})},beforeRouteLeave(t,e,s){if("goodsDetail"===t.name){let t=this.getScrollWrap(),e=t.scrollTop;this.$store.commit("set_pageScrollTopMap",{page:"category",scrollTop:e})}s()},activated(){console.log("classify activated"),this.setView(),this.$nextTick(()=>{let t=this.getScrollWrap();document&&t&&(t.scrollTop=this.scrollTop)})},created(){},methods:{getScrollWrap(){return document.querySelector(".right-good-list")||{}},async setView(){if(this.useCache)return;let t=await this.$api("product_channel");if(t){console.log("获取分类",t);let e=t.data;this.list_channel=e.filter(t=>"847"!=t.id),this.id?this.activeNavIndex=e.findIndex(t=>t.id==this.id)||0:(this.activeNavIndex=0,this.set_params({channel_id:e[0].id})),e.forEach(t=>{t.channels.unshift({title:"全部",id:t.id})}),this.select_level_1=e[this.activeNavIndex]||{}}},set_params(t){this.params={...this.params,...t}},toggleLevel2(t){console.log("切换二级分类",{...t}),this.select_level_2=t,this.set_params({channel_id:t.id})},onClickLeft(){this.$router.back()},onChangeChannel(t){let e={...this.list_channel[t]};console.log(e),this.select_level_1=e,this.select_level_2=e.channels.length?e.channels[0]:{},this.set_params({channel_id:e.id})}}},_=v,A=(s("08cd"),Object(m["a"])(_,i,a,!1,null,"3455e532",null));e["default"]=A.exports},b03b:function(t,e,s){"use strict";s("b2e6")},b2e6:function(t,e,s){},bcef:function(t,e,s){"use strict";var i=s("c245"),a=s("de29"),o=s("c4cf"),n=s("de7c"),c=s("98a4"),r=s("be14"),l=1!==[].unshift(0),h=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}();i({target:"Array",proto:!0,arity:1,forced:l||h},{unshift:function(t){var e=a(this),s=o(e),i=arguments.length;if(i){r(s+i);var l=s;while(l--){var h=l+i;l in e?e[h]=e[l]:c(e,h)}for(var u=0;u<i;u++)e[u]=arguments[u]}return n(e,s+i)}})},dd04:function(t,e,s){"use strict";var i=function(){var t=this;t._self._c;return t._e()},a=[],o={name:"shouqing",props:["kucun"],data(){return{}},computed:{},created(){},methods:{}},n=o,c=(s("12a0"),s("0b56")),r=Object(c["a"])(n,i,a,!1,null,"5a60d4be",null);e["a"]=r.exports},f06f:function(t,e,s){"use strict";var i=s("bbf7"),a=s("4360");const o=i["a"].api;let n={params:{},success:function(t){console.log("默认的回调",t)}};e["a"]={getList({params:t,success:e}=n){o("gouwuche_lists",t).then(t=>{let{code:s,data:i}=t;1==s&&e(i)})},add({params:t,success:e}=n){o("gouwuche_add",t).then(t=>{let{code:s,data:i,count:o,message:n}=t;alert(n),1==s&&(a["a"].commit("set_shopcart_count",o),e&&e(i))})},delete({params:t,success:e}=n){o("gouwuche_del",t).then(t=>{let{code:s,data:i,message:o,count:n}=t;alert(o),1==s&&(a["a"].commit("set_shopcart_count",n),e&&e(i))})},updateNum({params:t,success:e}=n){o("gouwuche_updateNum",t).then(t=>{let{code:s,data:i,message:o,count:n}=t;alert(o),1==s&&(a["a"].commit("set_shopcart_count",n),e&&e(i))})},clear({params:t,success:e}=n){o("gouwuche_delAll",t).then(t=>{let{code:s,data:i,message:o,count:n}=t;alert(o),1==s&&(a["a"].commit("set_shopcart_count",n),e&&e(i))})}}}}]);