(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b3ca2ec"],{"1ccf":function(t,e,s){},"212b":function(t,e,s){"use strict";s("c083")},4424:function(t,e,s){t.exports=s.p+"img/login.1ef4f79d.jpg"},4706:function(t,e,s){},"842b":function(t,e,s){},"9ee8":function(t,e,s){"use strict";s.r(e);s("4e3f");var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container login"},[e("van-nav-bar",{attrs:{title:"密码登录",fixed:!0,"left-arrow":""},on:{"click-left":t.toBack}}),e("div",{staticClass:"main"},[e("logo-box"),e("div",{staticClass:"input-wrap"},[e("van-form",[e("van-field",{attrs:{label:"手机号",clearable:"",maxlength:"11",type:"tel",placeholder:"请输入绑定手机号"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),e("van-field",{attrs:{label:"密码",clearable:"",maxlength:"20",type:"password",placeholder:"请输入密码"},model:{value:t.pass,callback:function(e){t.pass=e},expression:"pass"}}),e("div",{staticClass:"bottom-link fr jcb"},[e("span",{on:{click:function(e){return t.toRoute("/updatePassword")}}},[t._v("忘记密码")]),e("span",{on:{click:function(e){return t.toRoute("/loginSms?fullPath="+t.$route.query.fullPath)}}},[t._v("验证码登录")])]),e("div",{staticClass:"btn-box"},[e("button",{on:{click:function(e){return t.onNext()}}},[t._v("登录")])]),e("div",{staticClass:"tip"},[e("div",{staticClass:"left"},[e("span",{on:{click:function(e){return t.toRoute("/")}}},[t._v("回到主页 ")])]),e("div",{staticClass:"right"},[t._v(" 没有账号, "),e("b",{on:{click:function(e){return t.$router.push("/register")}}},[t._v("去注册")])])])],1)],1)],1)],1)},i=[],l=function(){var t=this,e=t._self._c;return e("van-button",{class:{"btn-code":t.isStyle},style:t.styleStype,attrs:{size:"small",type:"primary",disabled:t.timeDisabled},on:{click:t.getPhoneCode}},[1==t.textType?e("div",[t._v(t._s(t.title)),t.isShowNumber?e("span",{staticClass:"time-box"},[t._v("（"+t._s(t.time)+"）")]):t._e()]):t._e(),2==t.textType?e("div",[t.isShowNumber&&60!=t.time?e("span",{staticClass:"time-box"},[t._v(t._s(t.time)+"s后")]):t._e(),t._v(t._s(t.time>0?t.title:"重新获取"))]):t._e()])},n=[],a={name:"MessageCode",components:{},props:{phone:{default:""},isShowNumber:{type:Boolean,default:!0},isStyle:{type:Boolean,default:!0},styleStype:{type:Object,default:""},textType:{type:Number,default:1}},data(){return{timer:null,timeTotal:60,time:60,timeDisabled:!1,code:"",title:"获取验证码"}},computed:{},created(){console.log("当前路由",this.$route.name)},beforeDestroy(){clearInterval(this.timer),this.timer=null},methods:{getPhoneCode(){if(this.timer)return void alert("验证码发送频繁，请稍后再试");let t=/^1[3-9]\d{9}$/;t.test(this.phone)?(this.countdown(),console.log("获取验证码",this.$route.name),this.$store.dispatch("users_registerSendSms",{phone:this.phone}).then(t=>{console.log("验证码",t);let{code:e,message:s}=t.data;alert(s)})):alert("请输入正确的手机号码")},countdown(){let t=this;this.timeDisabled=!0,this.timer=setInterval(()=>{t.time>0?t.time--:(t.time=t.timeTotal,clearInterval(t.timer),t.timer=null,this.timeDisabled=!1)},1e3)}}},r=a,c=(s("b787"),s("0b56")),u=Object(c["a"])(r,l,n,!1,null,"7d46419e",null),h=u.exports,d=function(){var t=this;t._self._c;return t._m(0)},p=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrap"},[e("div",{staticClass:"bg-box"},[e("img",{attrs:{src:s("4424"),alt:""}})])])}],f={name:"logoBox"},m=f,b=(s("212b"),Object(c["a"])(m,d,p,!1,null,"664f8856",null)),v=b.exports,_={name:"Login",components:{LogoBox:v,MessageCode:h},data(){return{fullPath:this.$route.query.fullPath?decodeURIComponent(this.$route.query.fullPath):"",phone:"",pass:"",code:"",receiver_code:"",active:this.$route.query.active||1}},computed:{},created(){this.setView()},mounted(){},methods:{setView(){},updateCode(t){this.receiver_code=t,console.log("更新验证码",t)},onNext(){console.log("登录后要进入的页面",this.$route.query.fullPath),console.log("登录后要进入的页面",this.fullPath);let t=/^1[3-9]\d{9}$/;this.phone?t.test(this.phone)?this.pass?this.$api("users_phoneLogin",{type:0,phone:this.phone,password:this.pass}).then(t=>{let{code:e,data:s,message:o}=t;alert(o),1==e&&(this.$store.commit("set_isLogin",!0),this.$store.commit("set_baseInfo",s),this.$store.dispatch("appInit"),console.log("登录后要跳转的链接",this.fullPath),this.fullPath?this.$router.replace(this.fullPath):this.$router.back())}):alert("请输入密码"):alert("请输入正确的手机号码"):alert("请输入手机号")}}},g=_,y=(s("f458"),s("d769"),Object(c["a"])(g,o,i,!1,null,"0114c950",null));e["default"]=y.exports},b787:function(t,e,s){"use strict";s("4706")},c083:function(t,e,s){},d769:function(t,e,s){"use strict";s("1ccf")},f458:function(t,e,s){"use strict";s("842b")}}]);