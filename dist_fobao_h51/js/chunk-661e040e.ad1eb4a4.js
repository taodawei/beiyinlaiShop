(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-661e040e"],{"85fb":function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"page"},[i("div",{staticClass:"inner"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}],staticClass:"comment-list"},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了~"},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},t._l(t.list,(function(s){return i("div",{key:s.id,staticClass:"comment-item"},[i("div",{staticClass:"top"},[i("div",{staticClass:"avatar-box"},[i("img",{attrs:{src:s.touxiang||t.defaultAvatar}})]),i("div",{staticClass:"right"},[i("span",[t._v(t._s(s.username))]),i("van-rate",{staticClass:"rate",attrs:{value:s.star,"allow-half":"",color:"#F5A628","void-icon":"star","void-color":"#eee",size:"12"}})],1)]),i("div",{staticClass:"center"},[i("div",{staticClass:"text"},[t._v(t._s(s.content))]),i("div",{staticClass:"img-box"},[s.imgs.length?t._l(s.imgs,(function(a,e){return i("img",{key:e,attrs:{src:a},on:{click:function(i){return t.previewImg(a,e,s.imgs)}}})})):t._e()],2)]),"detail"!=t.$route.name?void 0:t._e(),i("div",{staticClass:"date-box"},[i("span",[t._v(t._s(s.dtTime))]),i("span",{staticClass:"guige"},[t._v("规格："+t._s(t._f("f_guige")(s.key_vals)))])])],2)})),0)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.list.length,expression:"!list.length"}],staticClass:"empty-container"},[[i("van-empty",{staticClass:"custom-image",attrs:{description:"暂无评价记录"}})]],2)])])},e=[],o=s("f2a7"),n=s("3dc0"),l=s("7736"),r={name:"orderList",components:{},data(){return{list_comment:[],list:[],finished:!1,loading:!1,timer:null,pagination:{page:1,pagenum:10},tabList:[],active_tab:0,searchParams:{}}},computed:{...Object(l["b"])(["defaultAvatar"])},watch:{searchParams(t,i){console.log("切换"),t&&this.setView()}},created(){this.setView()},methods:{setView(){this.init(),this.onLoad()},set_searchParams(t){this.searchParams={...this.searchParams,...t}},onClickLeft(){this.$router.back()},showLoading(){o["a"].loading({message:"数据加载中...",forbidClick:!0})},hideLoading(){o["a"].clear()},clear_timer(){clearTimeout(this.timer),this.timer=null},init(){this.clear_timer(),this.pagination.page=1,this.pages=0,this.list=[]},onLoad(){console.log("onload 加载 ===》"),this.timer?this.loading=!1:(console.log("继续查询 ===》"),this.timer=setTimeout(()=>{this.query_list()},100))},query_list(){this.showLoading(),this.$api("product_comments",{productId:this.$route.query.pid,star:0,...this.pagination,...this.searchParams}).then(t=>{this.hideLoading(),this.clear_timer();let{code:i,data:s,message:a,pages:e}=t;console.log("评论",s),1==i&&this.set_list(s)}),this.loading=!1,this.pagination.page++},set_tabList(t){if(0!=this.searchParams.star)return;console.log("设置标签",t);let i=[{title:"全部("+t.count+")",id:"0"},{title:"好评("+t.count_good+")",id:"5"},{title:"中评("+t.count_middle+")",id:"3"},{title:"差评("+t.count_bad+")",id:"1"}];this.tabList=i},set_list(t){t.forEach(t=>{t.pdtinfo&&(t.pdtinfo=JSON.parse(t.pdtinfo))}),this.list=[...this.list,...t],console.log("this.list",this.list),t.length<this.pagination.pagenum?this.finished=!0:this.finished=!1},onClickTab(t,i){console.log("切换状态",t,i),this.set_searchParams({star:t})},previewImg(t,i,s){console.log("预览图片",t),Object(n["a"])({images:s,startPosition:i,closeable:!0})}}},c=r,d=(s("eb8a"),s("0b56")),h=Object(d["a"])(c,a,e,!1,null,"ba6c32b2",null);i["default"]=h.exports},df57:function(t,i,s){},eb8a:function(t,i,s){"use strict";s("df57")}}]);