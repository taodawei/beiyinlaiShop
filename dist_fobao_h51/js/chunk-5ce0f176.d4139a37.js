(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ce0f176"],{"0b89":function(t,i,o){},"3e21":function(t,i,o){"use strict";o("4c2a")},"428b":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFFmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0MzYwLCAyMDIwLzAyLzEzLTAxOjA3OjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAxLTIyVDEyOjAxOjIwKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMS0yMlQxMjowMTozOSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wMS0yMlQxMjowMTozOSswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1ZDFmODM4ZS00MWEzLTZjNGYtOGQ3MC0yNWEwOGIyNzQzZTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NWQxZjgzOGUtNDFhMy02YzRmLThkNzAtMjVhMDhiMjc0M2UwIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NWQxZjgzOGUtNDFhMy02YzRmLThkNzAtMjVhMDhiMjc0M2UwIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ZDFmODM4ZS00MWEzLTZjNGYtOGQ3MC0yNWEwOGIyNzQzZTAiIHN0RXZ0OndoZW49IjIwMjEtMDEtMjJUMTI6MDE6MjArMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4xIChXaW5kb3dzKSIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5qQoGQAAABr0lEQVRoge3bvU7DMBQF4BMYeDemSiwgMTAwhC7po8AEzwUMTIy8AwuXpZWC1cQ38f2r8ZE8NLXj+9lVBivtiAj/KWfeBVingWtPA9eeBq49HPAGwOu+3WkWszK3AN4BvAG4zPYmorl2TkRf9DdDZoxl65PaPomomxvD2eGf5PMjgGHpNiikB/CcXOuyoxiruKPj8dzp7URN17mx3AmGQOj0Z3xIzxm/ZKII6CLsUrA3uhi7BuyFFsGuBVujxbAlYCu0KLYUrI0Wx0qAtdAqWCmwNFoNKwmWQqtipcGlaHWsBngt2gSrBV6KNsNqgrloU6w2OIc2x1qA59DmWCswF62OtQTn0CZYIt6ZllS+Z767MKvCaGWnHlDjDBa1RMGaob2wPTkdF3lhD33M0Z5YF7Q31hwdAWuKjoI1Q0fCmqCjYdXREbGq6KhYNXRkrAo6OlYcfQpYUfSpYMXQp4QVQXMmuJmYYOuALUbnbnzsPS0in53loD/2NU+O45xppa/MPwB4UThtWponALvkWt7DWMmr0QreB9jZtI2fL5tc/46o/eeh6jRw7Wng2tPAtecX1VTSW1+ZWTwAAAAASUVORK5CYII="},"4c2a":function(t,i,o){},"9ec1":function(t,i,o){"use strict";o("0b89")},f2cf:function(t,i,o){"use strict";o.r(i);var s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"container"},[i("modalGoodsGroupShare",{ref:"modalGoodsGroupShare"}),i("van-nav-bar",{attrs:{title:"订单详情","left-arrow":"",fixed:!0},on:{"click-left":t.toBack}}),i("van-action-sheet",{attrs:{actions:t.actions_operate,"cancel-text":"取消",round:!1,"close-on-click-action":""},on:{cancel:function(i){t.showAction_operate=!1},select:t.onSelect_operate},model:{value:t.showAction_operate,callback:function(i){t.showAction_operate=i},expression:"showAction_operate"}}),i("van-dialog",{staticClass:"modal-rule",attrs:{title:"长按二维码联系客服","show-cancel-button":""},model:{value:t.dialog_kefu_visible,callback:function(i){t.dialog_kefu_visible=i},expression:"dialog_kefu_visible"}},[i("div",{staticClass:"qrcode-box"},[i("img",{attrs:{src:t.qrcode_kefu}})])]),i("div",{staticClass:"content"},[i("div",{staticClass:"order-state-box"},[i("div",{staticClass:"text-1"},[t._v(" "+t._s(t.orderObj.status_info)+" ")]),3==t.orderObj.status?i("div",{staticClass:"text-2"},[t._v("订单将于"+t._s(t.webConfig.time_shouhuo)+"天后自动收货")]):t._e(),i("div",{staticClass:"shouhuo-info"},[i("div",{staticClass:"name-box"},[i("div",{staticClass:"left"},[t._v("收货人：")]),i("div",{staticClass:"right"},[t._v(t._s(t.shouhuo_info.name)+" "+t._s(t.shouhuo_info.phone))])]),i("div",{staticClass:"address-box"},[i("div",{staticClass:"left"},[t._v("收货地址：")]),i("div",{staticClass:"right"},[t._v(t._s(t.shouhuo_info.address))])])])]),i("div",{staticClass:"goods-info"},[i("div",{staticClass:"main-title"},[t._v("商品详情")]),i("div",{staticClass:"goods-box"},[t._l(t.orderObj.products,(function(o,s){return i("div",{key:s,staticClass:"goods-item"},[i("div",{staticClass:"img-box",on:{click:function(i){t.orderObj.tuan_info&&t.orderObj.tuan_info.id?t.mix_goods_detail_group_link(o.id):t.mix_goods_detail_link(o.id)}}},[i("img",{staticClass:"cover",attrs:{src:o.image,alt:""}})]),i("div",{staticClass:"info-box"},[i("div",{staticClass:"title",on:{click:function(i){t.orderObj.tuan_info&&t.orderObj.tuan_info.id?t.mix_goods_detail_group_link(o.id):t.mix_goods_detail_link(o.id)}}},[t._v(t._s(o.title))]),i("div",{staticClass:"guige"},[t._v(t._s(t._f("f_guige")(o.key_vals)))]),i("div",{staticClass:"price"},[i("span",{staticClass:"price-num"},[t._v("￥ "+t._s(o.price_sale))]),i("span",{staticClass:"number"},[t._v("x "+t._s(o.num))])])]),4!=t.orderObj.status||o.ifpingjia?t._e():i("div",{staticClass:"goods-action-box"},[i("button",{on:{click:function(i){return i.stopPropagation(),t.toRoute(`/orderReview?order_id=${t.order_id}&inventoryId=${o.id}`)}}},[t._v("评价商品")])])])})),i("div",{staticClass:"huizong-box"},[i("div",{staticClass:"price"},[i("div",{staticClass:"left"},[t._v("商品总价")]),i("div",{staticClass:"right"},[t._v("￥ "+t._s(t.goods_money))])]),t._m(0),t.coupon_money?i("div",{staticClass:"yunfei"},[i("div",{staticClass:"left"},[t._v("优惠券")]),i("div",{staticClass:"right"},[t._v("￥ "+t._s(t.coupon_money))])]):t._e(),i("div",{staticClass:"heji"},[i("div",{staticClass:"left",staticStyle:{visibility:"hidden"}},[t._v("-")]),i("div",{staticClass:"right"},[t._v(" 实付金额： "),i("span",[t._v("￥")]),i("b",[t._v(t._s(t.orderObj.price))])])])])],2)]),i("div",{staticClass:"order-info"},[t._m(1),i("div",[i("b",[t._v("下单时间：")]),i("span",[t._v(t._s(t.orderObj.dtTime))])]),i("div",[i("b",[t._v("订单编号：")]),i("span",[t._v(t._s(t.orderObj.order_id))]),i("van-button",{directives:[{name:"copy",rawName:"v-copy",value:t.copyText_code_order,expression:"copyText_code_order"}],staticClass:"btn-copy",attrs:{size:"small"},on:{click:t.onClickCopy}},[t._v("复制")])],1),i("div",[i("b",[t._v("订单备注：")]),i("span",[t._v(t._s(t.orderObj.remark||"-"))])]),t.fahuo_info&&t.fahuo_info.company?i("div",[i("b",[t._v("快递公司：")]),i("span",[t._v(t._s(t.fahuo_info.company))])]):t._e(),t.fahuo_info&&t.fahuo_info.company?i("div",[i("b",[t._v("快递单号：")]),i("span",[t._v(t._s(t.fahuo_info.order_id))]),i("van-button",{directives:[{name:"copy",rawName:"v-copy",value:t.copyText_code_wuliu,expression:"copyText_code_wuliu"}],staticClass:"btn-copy",attrs:{size:"small"},on:{click:t.onClickCopy}},[t._v("复制")])],1):t._e()]),i("div",{staticClass:"action-box"},[t._l(t.orderObj.actions,(function(o,s){return i("button",{key:s,staticClass:"order-action",class:o.type,on:{click:function(i){return t.handleOrderAction(o)}}},[t._v(t._s(o.name))])})),0==t.orderObj.status?i("button",{staticClass:"order-action",on:{click:function(i){return t.handleOrderAction({name:"分享拼团"})}}},[t._v("分享拼团")]):t._e()],2)])],1)},e=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"yunfei"},[i("div",{staticClass:"left"},[t._v("运费")]),i("div",{staticClass:"right"},[t._v("￥ 0.00")])])},function(){var t=this,i=t._self._c;return i("div",{staticClass:"state"},[i("span",[t._v("订单信息")])])}],a=(o("4e3f"),function(){var t=this,i=t._self._c;return i("div",{staticClass:"share-poster-container"},[i("van-overlay",{attrs:{show:t.show_modal}},[i("div",{staticClass:"share-container"},[i("div",{attrs:{id:"share-wrap"}},[i("div",{staticClass:"share-close",on:{click:function(i){t.show_modal=!1}}},[i("img",{attrs:{src:o("428b"),alt:""}})]),i("div",{ref:"saveImgBox",staticClass:"save-img-box"}),i("div",{staticClass:"share-inner"},[i("div",{ref:"capture",staticClass:"share-box"},[i("div",{staticClass:"share-title"},[i("span",[t._v("好物分享")])]),i("div",{staticClass:"img-box good-share-img-box"},[i("img",{attrs:{src:t.posterSrc,crossorigin:"anonymous"}})]),i("div",{staticClass:"share-content"},[i("div",{staticClass:"left"},[i("div",{staticClass:"price-box"},[t._v(" ￥ "),i("b",[t._v(t._s(t.goods.price_sale))])]),i("div",{staticClass:"title"},[t._v(t._s(t.goods.title))])]),i("div",{staticClass:"vue-qr-wrap-box"},[i("div",{staticClass:"vue-qr-wrap"},[i("vue-qr",{attrs:{text:t.qrcodeConfig.url,size:400,callback:t.qrcodeCallback}})],1)])]),i("div",{staticClass:"share-btn-box"},[t._v("长按图片下载")])])])])])])],1)}),r=[],c=o("0057"),n=o.n(c),d=o("0ef5"),l=o.n(d),u=o("7736"),h={name:"modal-goods-share",components:{VueQr:l.a},data(){let t=window.location.origin;return{origin:t,posterSrc:"",show_modal:!1,createdPoster:!1,order:{},goods:{}}},computed:{...Object(u["b"])([""]),qrcodeConfig(){let t=this.goods.id,i=this.order.tuan_info?this.order.tuan_info.id:"",o=`${this.origin}/goodsDetailGroup?id=${t}&tuan_id=${i}`;return console.log("分享二维码链接",o),{url:o}}},watch:{show_modal(t){t&&(this.timer=setTimeout(()=>{this.saveAsImg()},2500))}},created(){},beforeDestroy(){clearTimeout(this.timer),this.timer=null},methods:{init(t){console.log("分享订单商品",{...t}),this.order=t,this.goods=this.order.products[0],this.posterSrc=this.goods.image+"?ms="+(new Date).getTime(),this.show_modal=!0},qrcodeCallback(t,i){},saveAsImg(){this.createdPoster||(console.log("开始生成海报 1"),new n.a(this.$refs.capture,{useCORS:!0,allowTaint:!0,taintTest:!0,scale:2}).then(t=>{console.log("开始生成海报 2");let i=new Image;i.src=t.toDataURL(),this.$refs.saveImgBox.appendChild(i),this.sharePosterMakeDone=!0,console.log("图片添加到 body",t),this.createdPoster=!0,console.log("开始生成海报 4")}),console.log("开始生成海报 3"))}}},_=h,v=(o("3e21"),o("0b56")),m=Object(v["a"])(_,a,r,!1,null,"ea0986b2",null),b=m.exports,p=o("36fc"),f={name:"order-detail",components:{modalGoodsGroupShare:b},data(){return{order_id:this.$route.query.order_id,orderObj:{},shouhuo_info:{},pay_info:{},fahuo_info:{},is_payed:!1,is_fahuo:!1,dialog_kefu_visible:!1,showAction_operate:!1,actions_operate:[{name:"取消订单"},{name:"立即支付"},{name:"确认收货"},{name:"评价订单"},{name:"删除订单"},{name:"再次购买"}],currency:"￥",curr:{},status:"",shequ:{},total_money:""}},computed:{...Object(u["b"])(["qrcode_kefu"]),copyText_code_order(){let t="";return this.orderObj.orderId&&(t=this.orderObj.orderId),t},copyText_code_wuliu(){let t="";return this.orderObj.fahuo_info&&this.orderObj.fahuo_info.order_id&&(t=this.orderObj.fahuo_info.order_id),t},copyText_code_tihuoma(){let t="";return this.orderObj.shequ&&this.orderObj.shequ.tihuoma&&(t=this.orderObj.shequ.tihuoma),t},pageStateText(){let t="";return this.curr&&this.orderObj.status&&(t={"-5":"待支付","-3":"售后处理中","-1":"无效",0:"待成团",2:"待发货",3:"待收货",4:"已收货"}[this.orderObj.status]),t},showMendian(){return 1==this.orderObj.peisong_type},goods_money(){let t=0;return this.orderObj.products&&this.orderObj.products.length&&this.orderObj.products.forEach(i=>{t+=+i.price_sale*i.num}),t=t.toFixed(2),t},coupon_money(){let t=0;return this.orderObj.pay_info&&this.orderObj.pay_info.yhq&&(t=this.orderObj.pay_info.yhq),t}},watch:{orderObj(t){let{shouhuo_info:i,status:o,pay_info:s,fahuo_info:e}=t;this.shouhuo_info=i,this.pay_info=s,-5!=o&&-1!=o&&0!=o&&(this.is_payed=!0),e&&e.company&&(this.fahuo_info=e,this.is_fahuo=!0)}},created(){this.setView()},methods:{toBack(){"orderPaymentSuccess"==this.$route.query.from?this.$router.push("myOrder"):this.$router.back()},setView(){this.mix_order_detail(this.order_id,t=>{this.orderObj=t})},onSelect_operate(t,i){console.log({...t},i);let o=t.name;this.handleOrderAction({name:o})},handleOrderAction(t){let i=this.order_id;console.log({...t});let o=t.name;"取消订单"==o?p["a"].confirm({title:"取消订单？"}).then(()=>{this.mix_order_cancel(i,()=>{this.setView()})}).catch(()=>{}):"删除订单"==o?this.mix_order_delete(i,()=>{this.$router.back()}):"立即支付"==o?this.mix_order_payment_link(i):"确认收货"==o?p["a"].confirm({title:"确认收货？",message:"为了保证您的售后权益，请收到货无误后，再确定收货哦！"}).then(()=>{this.mix_order_qianshou(i,()=>{this.setView()})}).catch(()=>{}):"评价订单"==o?this.mix_order_review_link(i):"申请售后"==o?this.mix_order_refund_link(i):"分享拼团"==o&&(alert("分享拼团"),this.$refs.modalGoodsGroupShare.init(this.orderObj))},onClickCopy(){alert("复制成功")},onSearchWuliu(){window.location.href="https://m.kuaidi100.com/"}}},C=f,g=(o("9ec1"),Object(v["a"])(C,s,e,!1,null,"6f741ede",null));i["default"]=g.exports}}]);