(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ca1ac04"],{"235a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page"},[e("div",{staticClass:"container"},[e("canvas",{attrs:{id:"canvas"},on:{click:function(e){return t.saveImage()}}})])])},a=[],n={name:"index",components:{},data(){return{canvas:null,ctx:null}},computed:{},created(){},mounted(){this.initParameter(),this.initCanvas()},methods:{initParameter(){const{screen:{width:t},devicePixelRatio:e}=window;this.windowWidth=t,this.dpr=Math.round(e)},async initCanvas(){const t=document.getElementById("canvas"),e=t.getContext("2d");this.canvas=t,this.ctx=e,await this.getBackgroundImage(),await this.getQRCodeImage(),await this.getAvatarImage(),this.fillBackgroundImage(),this.fillQrCodeImage(),this.fillUsernameText(),this.fillHelpText(),this.fillUserInfo()},getBackgroundImage(){return new Promise(async t=>{const e=new Image;e.src=await this.getURLBase64("//www.yegoo365.com/dist_shouguang/img/sale-rank-bg.0f3f100c.png"),e.crossOrigin="*",e.onload=()=>{this.backgroundImage=e,t()}})},getQRCodeImage(){return new Promise(async t=>{const e=new Image;e.src=await this.getURLBase64("//www.yegoo365.com/dist_shouguang/img/sale-rank-bg.0f3f100c.png"),e.crossOrigin="*",e.onload=()=>{this.qrCodeImage=e,t()}})},getAvatarImage(){return new Promise(async t=>{const e=new Image;e.src=await this.getURLBase64("//thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKdMxExet3lUfzO7BmMRAh3MfpQxzsCgYuV0j0AGUgNxUnoVRueEThiaOEJssg3hjickcgMnQf64wqw/132"),e.crossOrigin="*",e.onload=()=>{this.avatarImage=e,t()}})},fillBackgroundImage(){const{width:t,height:e}=this.backgroundImage,i=this.windowWidth-40,s=t/i,a=e/s;this.canvas.width=i*this.dpr,this.canvas.height=a*this.dpr,this.canvas.style.width=i*this.dpr+"px",this.canvas.style.height=a*this.dpr+"px",this.ctx.scale(this.dpr,this.dpr),this.ctx.clearRect(0,0,i,a),this.ctx.drawImage(this.backgroundImage,0,0,i,a),this.canvasWidth=i,this.canvasHeight=a},fillQrCodeImage(){const{width:t,height:e}=this.qrCodeImage,{canvasWidth:i,canvasHeight:s}=this,a=i-140,n=t/a,h=e/n,c=i/2-a/2,o=s/2-h/2-30;this.qrCodePointX=c,this.qrCodePointY=o,this.qrCodeImageWidth=a,this.qrCodeImageHeight=h,this.ctx.drawImage(this.qrCodeImage,c,o,a,h)},fillUsernameText(){const{canvasWidth:t}=this;this.ctx.font="normal 20px 微软雅黑",this.ctx.fillStyle="#666",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText("zhcxk1998",t/2,this.qrCodePointY-20)},fillHelpText(){const{canvasWidth:t}=this;this.ctx.font="normal 16px 微软雅黑",this.ctx.fillStyle="#999",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText("微信扫描上方二维码，添加好友",t/2,this.qrCodePointY+this.qrCodeImageHeight+80)},fillUserInfo(){const t="BB小天使",{canvasWidth:e}=this,{width:i,height:s}=this.avatarImage,{width:a}=this.ctx.measureText(t),n=30,h=i/n,c=s/h,o=10,r=n+a+o,d=e/2-r/2,g=this.qrCodePointY+this.qrCodeImageHeight+100;this.ctx.textAlign="left",this.ctx.fillText(t,d+n+o,g+c/2),this.ctx.drawImage(this.avatarImage,d,g,n,c)},saveImage(){const{canvasWidth:t,canvasHeight:e}=this;console.log(this.canvas.toDataURL())},getURLBase64(t){return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("get",t,!0),s.responseType="blob",s.onload=function(){if(200===this.status){const t=this.response,i=new FileReader;i.onloadend=function(t){const{target:i}=t,s=i.result;e(s)},i.readAsDataURL(t)}},s.onerror=function(){i()},s.send()})}}},h=n,c=(i("d218"),i("0b56")),o=Object(c["a"])(h,s,a,!1,null,"590a5723",null);e["default"]=o.exports},d218:function(t,e,i){"use strict";i("fc60")},fc60:function(t,e,i){}}]);