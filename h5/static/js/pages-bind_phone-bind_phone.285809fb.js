(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bind_phone-bind_phone"],{"131c":function(e,t,n){"use strict";var i=n("bda8"),o=n.n(i);o.a},"72d8":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */\r\n/* 页面左右间距 */\r\n/* 文字尺寸 */\r\n/*文字颜色*/\r\n/* 边框颜色 */\r\n/* 图片加载中颜色 */\r\n/* 行为相关颜色 */.m-logo[data-v-7c475e0c]{display:flex;justify-content:center;border-radius:50%;margin-top:%?250?%}.m-logo uni-image[data-v-7c475e0c]{width:%?230?%;height:%?230?%}.m-btn[data-v-7c475e0c]{display:flex;margin:0;padding:0;justify-content:center;align-items:center;line-height:%?90?%;width:%?480?%;height:%?80?%;background:red;margin-left:%?20?%;font-size:%?30?%;color:#fff;font-weight:800;border-radius:%?8?%;border:0;margin:%?90?% auto 0 auto}.m-text[data-v-7c475e0c]{display:flex;justify-content:center;position:fixed;bottom:%?80?%;font-size:%?24?%;color:#333;text-align:center;width:%?750?%}.m-text .m-text-font1[data-v-7c475e0c]{color:red}.mobile[data-v-7c475e0c]{display:flex;margin:0;padding:0;align-items:center;line-height:%?90?%;width:%?480?%;height:%?80?%;color:#a7a7a7;border:1px solid #ccc;padding-left:%?16?%;font-size:%?24?%;border-radius:%?8?%;margin:%?90?% auto 0 auto}',""]),e.exports=t},"7c54":function(e,t,n){"use strict";n.r(t);var i=n("8892"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},8573:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[e.user_info.user_id?e._e():n("v-uni-view",{staticClass:"m-logo"},[e.system_info.logo?n("v-uni-image",{attrs:{src:e.system_info.logo,mode:"widthFix"}}):n("v-uni-image",{attrs:{src:"/static/index/logo.png",mode:"widthFix"}})],1),e.user_info.user_id?e._e():n("v-uni-view",{staticClass:"m-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.weixinAuth.apply(void 0,arguments)}}},[n("v-uni-text",[e._v("微信授权")])],1),0==e.user_info.if_edit_phone?[n("v-uni-view",{staticClass:"mobile"},[n("v-uni-input",{attrs:{type:"number",value:"",placeholder:"请输入手机号","placeholder-style":"color:#A7A7A7"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}})],1),n("v-uni-button",{staticClass:"m-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindphone.apply(void 0,arguments)}}},[n("v-uni-text",[e._v("确定")])],1)]:e._e()],2)},a=[]},8892:function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("527b"),a=i(n("40e0")),s={data:function(){return{user_info:{},system_info:{},isWeixin:!1,mobile:""}},onLoad:function(){this.user_info=uni.getStorageSync("user_info"),this.system_info=uni.getStorageSync("system_info")},methods:{to_link:o.to_link,getUserInfo:function(e){var t=this;(0,o.get_userInfo)((function(n){t.user_info=n,"function"==typeof e&&e()}))},getPhoneNumber:function(e){var t=this,n={encryptedData:e.detail.encryptedData,iv:e.detail.iv};console.log(e,"phone"),a.default.getJson("users_bindWxPhone",n).then((function(e){if(console.log(e),1==e.code){var n=uni.getStorageSync("user_info");n.user_id=e.data.user_id,n.token=e.data.token,uni.setStorageSync("user_info",n),t.getUserInfo(),(0,o.msg)("绑定成功",(function(){(0,o.to_back)()}))}else(0,o.msg)(e.message)}))},get_user_info:function(e){var t=this;uni.getUserProfile({desc:"获取您的头像信息",success:function(e){if("getUserProfile:ok"==e.errMsg){var n={};n.nickname=e.userInfo.nickName,n.avatarurl=e.userInfo.avatarUrl,a.default.getJson("users_wxRegist",n).then((function(e){(0,o.msg)(e.message),1==e.code&&t.getUserInfo()}))}}})},weixinAuth:function(){var e=this;e.weachtAuthorization()},weachtAuthorization:function(){var e="wxd4b0efbea1a575d9",t="https://ycx.67.zhishangez.cn/";window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+t+"&response_type=code&scope=snsapi_userinfo#wechat_redirect"},bindphone:function(){var e=this,t=/^[1][3,4,5,7,8,9][0-9]{9}$/;t.test(this.mobile)||uni.showToast({title:"请输入正确的手机号",icon:"none"}),a.default.getJson("users_bindPhone",{phone:this.mobile}).then((function(t){if(1==t.code){(0,o.msg)(t.message);var n=uni.getStorageSync("user_info");n.user_id=t.data.user_id,n.token=t.data.token,uni.setStorageSync("user_info",n),e.getUserInfo(),(0,o.msg)("绑定成功",(function(){(0,o.to_back)()}))}else(0,o.msg)(t.message)}))}}};t.default=s},b78c:function(e,t,n){"use strict";n.r(t);var i=n("8573"),o=n("7c54");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("131c");var s,r=n("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"7c475e0c",null,!1,i["a"],s);t["default"]=c.exports},bda8:function(e,t,n){var i=n("72d8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("ca987552",i,!0,{sourceMap:!1,shadowMode:!1})}}]);